\hypertarget{classmangrove_1_1comparison__expr}{}\section{mangrove\+:\+:comparison\+\_\+expr$<$ NvpT, U $>$ Class Template Reference}
\label{classmangrove_1_1comparison__expr}\index{mangrove\+::comparison\+\_\+expr$<$ Nvp\+T, U $>$@{mangrove\+::comparison\+\_\+expr$<$ Nvp\+T, U $>$}}


Represents a query expression with the syntax \char`\"{}key\+: \{\$op\+: value\}\char`\"{}.  




{\ttfamily \#include $<$query\+\_\+builder.\+hpp$>$}

Inheritance diagram for mangrove\+:\+:comparison\+\_\+expr$<$ NvpT, U $>$\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classmangrove_1_1comparison__expr}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
constexpr \hyperlink{classmangrove_1_1comparison__expr_a097fc0cca91f1746c11a78f08a5d4952}{comparison\+\_\+expr} (const NvpT \&\hyperlink{classmangrove_1_1nvp}{nvp}, const U \&field, const char $\ast$op)
\begin{DoxyCompactList}\small\item\em Constructs a query expression for the given key, value, and comparison type. \end{DoxyCompactList}\item 
constexpr \hyperlink{classmangrove_1_1comparison__expr_a0e69c2e073819f3dd6f736e2368385ff}{comparison\+\_\+expr} (const \hyperlink{classmangrove_1_1comparison__expr}{comparison\+\_\+expr} \&expr, const char $\ast$op)
\begin{DoxyCompactList}\small\item\em Takes a comparison expression, and creates a new one with a different operator, but the same value and field. \end{DoxyCompactList}\item 
std\+::string \& \hyperlink{classmangrove_1_1comparison__expr_a24cd33bfa502e97ff0fd16d059192332}{append\+\_\+name} (std\+::string \&s) const \hypertarget{classmangrove_1_1comparison__expr_a24cd33bfa502e97ff0fd16d059192332}{}\label{classmangrove_1_1comparison__expr_a24cd33bfa502e97ff0fd16d059192332}

\begin{DoxyCompactList}\small\item\em Appends the name of the contained field to a string. \end{DoxyCompactList}\item 
void \hyperlink{classmangrove_1_1comparison__expr_a2d534897e90161d1c0a71f9073c640e3}{append\+\_\+to\+\_\+bson} (bsoncxx\+::builder\+::core \&builder, bool wrap=false, bool omit\+\_\+name=false) const 
\begin{DoxyCompactList}\small\item\em Appends this expression to a B\+S\+ON core builder, as a key-\/value pair of the form \char`\"{}key\+: \{\$cmp\+: val\}\char`\"{}, where \$cmp is some comparison operator. \end{DoxyCompactList}\item 
\hyperlink{classmangrove_1_1comparison__expr_ae6101d0a1095f11ded179dd30f4268a6}{operator bsoncxx\+::document\+::view\+\_\+or\+\_\+value} () const 
\begin{DoxyCompactList}\small\item\em Converts the expression to a B\+S\+ON filter for a query. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$typename NvpT, typename U$>$\\*
class mangrove\+::comparison\+\_\+expr$<$ Nvp\+T, U $>$}

Represents a query expression with the syntax \char`\"{}key\+: \{\$op\+: value\}\char`\"{}. 

This usually means queries that are comparisons, such as (User.\+age $>$ 21). However, this also covers operators such as \$exists, or any operator that has the above syntax. 
\begin{DoxyTemplParams}{Template Parameters}
{\em NvpT} & The type of the name-\/value pair this expression uses. \\
\hline
{\em U} & The type of the value to compare against. This could be the same as the value type of NvpT, or the type of some other parameter, or even a query builder expression. \\
\hline
\end{DoxyTemplParams}


\subsection{Constructor \& Destructor Documentation}
\index{mangrove\+::comparison\+\_\+expr@{mangrove\+::comparison\+\_\+expr}!comparison\+\_\+expr@{comparison\+\_\+expr}}
\index{comparison\+\_\+expr@{comparison\+\_\+expr}!mangrove\+::comparison\+\_\+expr@{mangrove\+::comparison\+\_\+expr}}
\subsubsection[{\texorpdfstring{comparison\+\_\+expr(const Nvp\+T \&nvp, const U \&field, const char $\ast$op)}{comparison_expr(const NvpT &nvp, const U &field, const char *op)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename NvpT, typename U$>$ constexpr {\bf mangrove\+::comparison\+\_\+expr}$<$ NvpT, U $>$\+::{\bf comparison\+\_\+expr} (
\begin{DoxyParamCaption}
\item[{const NvpT \&}]{nvp, }
\item[{const U \&}]{field, }
\item[{const char $\ast$}]{op}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classmangrove_1_1comparison__expr_a097fc0cca91f1746c11a78f08a5d4952}{}\label{classmangrove_1_1comparison__expr_a097fc0cca91f1746c11a78f08a5d4952}


Constructs a query expression for the given key, value, and comparison type. 


\begin{DoxyParams}{Parameters}
{\em nvp} & A name-\/value pair corresponding to a key in a document \\
\hline
{\em field} & The value that the key is being compared to. \\
\hline
{\em op} & The type of comparison operator, such at gt ($>$) or ne (!=). \\
\hline
\end{DoxyParams}
\index{mangrove\+::comparison\+\_\+expr@{mangrove\+::comparison\+\_\+expr}!comparison\+\_\+expr@{comparison\+\_\+expr}}
\index{comparison\+\_\+expr@{comparison\+\_\+expr}!mangrove\+::comparison\+\_\+expr@{mangrove\+::comparison\+\_\+expr}}
\subsubsection[{\texorpdfstring{comparison\+\_\+expr(const comparison\+\_\+expr \&expr, const char $\ast$op)}{comparison_expr(const comparison_expr &expr, const char *op)}}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename NvpT, typename U$>$ constexpr {\bf mangrove\+::comparison\+\_\+expr}$<$ NvpT, U $>$\+::{\bf comparison\+\_\+expr} (
\begin{DoxyParamCaption}
\item[{const {\bf comparison\+\_\+expr}$<$ NvpT, U $>$ \&}]{expr, }
\item[{const char $\ast$}]{op}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classmangrove_1_1comparison__expr_a0e69c2e073819f3dd6f736e2368385ff}{}\label{classmangrove_1_1comparison__expr_a0e69c2e073819f3dd6f736e2368385ff}


Takes a comparison expression, and creates a new one with a different operator, but the same value and field. 

This is primarily used to wrap \$regex operators in \$not, since \$not cannot contains a \$regex operator, it must directly contain the regex itself. 
\begin{DoxyParams}{Parameters}
{\em expr} & A comparison expresison with a similar field type and value type. \\
\hline
{\em op} & The new operator to use. \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\index{mangrove\+::comparison\+\_\+expr@{mangrove\+::comparison\+\_\+expr}!append\+\_\+to\+\_\+bson@{append\+\_\+to\+\_\+bson}}
\index{append\+\_\+to\+\_\+bson@{append\+\_\+to\+\_\+bson}!mangrove\+::comparison\+\_\+expr@{mangrove\+::comparison\+\_\+expr}}
\subsubsection[{\texorpdfstring{append\+\_\+to\+\_\+bson(bsoncxx\+::builder\+::core \&builder, bool wrap=false, bool omit\+\_\+name=false) const }{append_to_bson(bsoncxx::builder::core &builder, bool wrap=false, bool omit_name=false) const }}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename NvpT, typename U$>$ void {\bf mangrove\+::comparison\+\_\+expr}$<$ NvpT, U $>$\+::append\+\_\+to\+\_\+bson (
\begin{DoxyParamCaption}
\item[{bsoncxx\+::builder\+::core \&}]{builder, }
\item[{bool}]{wrap = {\ttfamily false}, }
\item[{bool}]{omit\+\_\+name = {\ttfamily false}}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classmangrove_1_1comparison__expr_a2d534897e90161d1c0a71f9073c640e3}{}\label{classmangrove_1_1comparison__expr_a2d534897e90161d1c0a71f9073c640e3}


Appends this expression to a B\+S\+ON core builder, as a key-\/value pair of the form \char`\"{}key\+: \{\$cmp\+: val\}\char`\"{}, where \$cmp is some comparison operator. 


\begin{DoxyParams}{Parameters}
{\em builder} & A B\+S\+ON core builder \\
\hline
{\em wrap} & Whether to wrap the B\+S\+ON inside a document. \\
\hline
{\em omit\+\_\+name} & Whether to skip the name of the field. This is used primarily in \hyperlink{classmangrove_1_1not__expr}{not\+\_\+expr} and free\+\_\+expr to append just the value of the expression. \\
\hline
\end{DoxyParams}
\index{mangrove\+::comparison\+\_\+expr@{mangrove\+::comparison\+\_\+expr}!operator bsoncxx\+::document\+::view\+\_\+or\+\_\+value@{operator bsoncxx\+::document\+::view\+\_\+or\+\_\+value}}
\index{operator bsoncxx\+::document\+::view\+\_\+or\+\_\+value@{operator bsoncxx\+::document\+::view\+\_\+or\+\_\+value}!mangrove\+::comparison\+\_\+expr@{mangrove\+::comparison\+\_\+expr}}
\subsubsection[{\texorpdfstring{operator bsoncxx\+::document\+::view\+\_\+or\+\_\+value() const }{operator bsoncxx::document::view_or_value() const }}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename NvpT, typename U$>$ {\bf mangrove\+::comparison\+\_\+expr}$<$ NvpT, U $>$\+::operator bsoncxx\+::document\+::view\+\_\+or\+\_\+value (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classmangrove_1_1comparison__expr_ae6101d0a1095f11ded179dd30f4268a6}{}\label{classmangrove_1_1comparison__expr_ae6101d0a1095f11ded179dd30f4268a6}


Converts the expression to a B\+S\+ON filter for a query. 

The format of the B\+S\+ON is \char`\"{}\{key\+: \{\$not\+: \{\$cmp\+: val\}\}\}\char`\"{}. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/mangrove/expression\+\_\+syntax.\+hpp\item 
src/mangrove/query\+\_\+builder.\+hpp\end{DoxyCompactItemize}
